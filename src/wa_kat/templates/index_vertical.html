<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>WA KAT</title>

    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/typeaheadjs.css" rel="stylesheet">
    <link href="/static/css/wa_kat.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="http://brython.info/src/brython_dist.js"></script>
  </head>
  <body onload="brython({debug: 1})">
  <h1 class="text-center">WA KAT</h1>

  <div class="container">
  <form id="application_form" class="form-horizontal" role="form">

    <div class="form-group">
      <label for="url" class="control-label col-sm-2">URL</label>
      <div class="col-sm-10">
        <div class="input-group">
% if registered:
          <p class="form-control-static"><a href="{{url}}">{{url}}</a></p>
% else:
          <input type="text" class="form-control" id="url" placeholder="URL webu ke katalogizaci." />
% end
        <span class="input-group-btn">
          <button type="button" class="btn btn-default" id="run_button">Spustit</button>
        </span>
        </div>
      </div>
    </div>

    <div class="form-group" id="whole_urlbox_error" style="display: none;">
      <div class="col-sm-2"></div>
      <div class="col-sm-10">
        <div class="alert alert-danger" role="alert" id="urlbox_error"></div>
      </div>
    </div>

    <div class="form-group" id="whole_progress_bar" style="display: none;">
      <div class="col-sm-2"></div>
      <div class="col-sm-10">
        <div class="progress">
          <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%" id="progress_bar">
            Čekejte prosím, analýzy probíhají..
          </div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="issn" class="control-label col-sm-2">ISSN</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="issn" placeholder="ISSN. Bude použito pro získání dalších katalogizačních informací." />
      </div>
    </div>

    <div class="form-group">
      <label for="title" class="control-label col-sm-2">Název</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="title" placeholder="Název katalogizovaných webstránek." />
      </div>
    </div>

    <div class="form-group">
      <label for="creation_date" class="control-label col-sm-2">Datum vzniku</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="creation_date" placeholder="Datum vzniku webstránek. Formát DD.MM.YYYY." />
      </div>
    </div>

    <div class="form-group">
      <label for="author" class="control-label col-sm-2">Autor, Vydavatel</label>
      <div id="author_typeahead" class="col-sm-10">
        <input class="typeahead form-control" type="text" id="author" placeholder="Autor či vydavatel stránek. Klikněte pro výběr.">
        <i class="dropdown_hint glyphicon glyphicon-menu-down form-control-feedback"></i>
      </div>
    </div>

    <div class="form-group">
      <label for="place" class="control-label col-sm-2">Místo</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="place" placeholder="Místo vzniku." />
      </div>
    </div>

    <div class="form-group">
      <label for="keywords" class="control-label col-sm-2">Předmětová hesla</label>
      <div class="col-sm-10">
        <select multiple class="form-control" id="keywords">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="konspekt" class="control-label col-sm-2">Konspekt</label>
      <div class="col-sm-10">
        <select multiple class="form-control" id="konspekt">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="subkonspekt" class="control-label col-sm-2">SubKonspekt</label>
      <div class="col-sm-10">
        <select multiple class="form-control" id="subkonspekt">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="freq" class="control-label col-sm-2">Frekvence</label>
      <div class="col-sm-10">
        <select multiple class="form-control" id="freq">
          <option>1</option>
          <option>2</option>
          <option>3</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="lang" class="control-label col-sm-2">Jazyk</label>
      <div class="col-sm-10">
        <select multiple class="form-control" id="lang">
          <option>1</option>
          <option>2</option>
          <option>3</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="annotation" class="control-label col-sm-2">Anotace</label>
      <div class="col-sm-10">
        <textarea class="form-control" rows="3" id="annotation"></textarea>
      </div>
    </div>

    <div class="form-group">
      <label for="periode" class="control-label col-sm-2">Periodicita</label>
      <div class="col-sm-10">
        <select multiple class="form-control" id="periode">
          <option>1</option>
          <option>2</option>
          <option>3</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="rules" class="control-label col-sm-2">Pravidla</label>
      <div class="col-sm-10">
          <div class="checkbox">
            <label>
              <input type="checkbox" value="">
              Option one is this and that&mdash;be sure to include why it's great
            </label>
          </div>
        </div>
    </div>

    <div class="form-group">
      <label for="header" class="control-label col-sm-2">Hlavička</label>
      <div class="col-sm-10">
        <textarea class="form-control" rows="3" id="header"></textarea>
      </div>
    </div>
  </form>
</div>

<footer class="footer text-center">
  <div class="container">
    <p class="text-muted">© 2015 <a href="https://github.com/WebArchivCZ/WA-KAT">WA KAT</a></p>
  </div>
</footer>

<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/typeahead.bundle.js"></script>
<script type="text/python" src="/static/py/wa_kat_main.py"></script>

<script>
var substringMatcher = function(strs) {
  return function findMatches(q, cb) {
    var matches, substringRegex;

    // an array that will be populated with substring matches
    matches = [];

    // regex used to determine if a string contains the substring `q`
    substrRegex = new RegExp(q, 'i');

    // iterate through the pool of strings and for any string that
    // contains the substring `q`, add it to the `matches` array
    $.each(strs, function(i, str) {
      if (substrRegex.test(str)) {
        matches.push(str);
      }
    });

    cb(matches);
  };
};

var states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California',
  'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii',
  'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
  'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
  'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire',
  'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota',
  'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island',
  'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont',
  'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'
];

$('#author_typeahead .typeahead').typeahead({
    hint: true,
    highlight: true,
    minLength: 0
  }, {
    name: 'states',
    source: substringMatcher(states),
    limit: 20,
    templates: {
        suggestion: function(item) { return "<p style='margin: 0px'><b>DC: </b>" + item + "</p>"; },
    }
});
</script>
  </body>
</html>